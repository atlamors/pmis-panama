# Architecture Overview

PMIS is built as a **micro-frontend** and **microservice** architecture.

```mermaid
---
config:
    layout: dagre
    theme: mc
---
flowchart LR
 subgraph FE["Frontend"]
        host["Angular Host App"]
        mfe1["Scheduling MFE"]
        mfe2["Resources MFE"]
        mfe3["Etc..."]
  end
 subgraph SVC[".NET Core Services"]
        service1["Auth Service"]
        service2["Scheduling Service"]
        service3["Resources Service"]
        service4["Etc..."]
  end
 subgraph BE["Backend"]
        gw["API Gateway"]
        SVC
  end
    user["Operator / User"] -- HTTPS --> browser["Browser"]
    browser --> host
    host -- Module Federation --> mfe1
    host -- Module Federation --> mfe2
    host -- Module Federation --> mfe3
    host -- REST/JSON --> gw
    mfe1 -- REST/JSON --> gw
    mfe2 -- REST/JSON --> gw
    mfe3 -- REST/JSON --> gw
    gw --> service1 & service2 & service3 & service4
    service1 & service2 & service3 & service4 --> db[("Azure SQL")]
```

---

## Frontend Architecture

| Component      | Path                           | Port | Tech                          |
| -------------- | ------------------------------ | ---- | ----------------------------- |
| Host           | `pmis-frontend/host`           | 4200 | Angular 20, Module Federation |
| Scheduling MFE | `pmis-frontend/scheduling-mfe` | 4201 | Angular 20, Module Federation |
| Accounting MFE | `pmis-frontend/accounting-mfe` | 4202 | Angular 20, Module Federation |
| Operations MFE | `pmis-frontend/operations-mfe` | 4203 | Angular 20, Module Federation |
| Customs MFE | `pmis-frontend/customs-mfe` | 4204 | Angular 20, Module Federation |
| Resources MFE | `pmis-frontend/resources-mfe` | 4205 | Angular 20, Module Federation |
| ...            | ...                            | ...  | ...                           |

- Ports `4200` reserved for the host.

---

## Backend Architecture

| Service     | Path                       | Port | Tech                            |
| ----------- | -------------------------- | ---- | ------------------------------- |
| API Gateway | `pmis-backend/api-gateway` | 5000 | ASP.NET Core 8, YARP            |
| Auth        | `pmis-backend/auth`        | 5001 | ASP.NET Core 8, IdentityServer  |
| Scheduling  | `pmis-backend/scheduling`  | 5100 | ASP.NET Core 8, EF Core, Scalar |

- Ports `5000-5099` reserved for core and cross cutting services.
- Ports `5100-5999` reserved for services.

---

## Technology Stack

### Frontend

* **Angular 20 (Angular)** — [https://angular.dev](https://angular.dev)
  TypeScript-based web application framework maintained by Google.
* **Webpack 5 Module Federation (MF)** — [https://webpack.js.org/concepts/module-federation](https://webpack.js.org/concepts/module-federation)
  Load code from multiple builds at runtime.
* **PrimeNG** — [https://primeng.org](https://primeng.org)
  UI component library for Angular.
* **Tailwind CSS** — [https://tailwindcss.com](https://tailwindcss.com)
  Utility-first CSS framework (v3.4 using v4-style `@import "tailwindcss";`).

### Backend

* **ASP.NET Core 8 (ASP.NET)** — [https://learn.microsoft.com/aspnet/core](https://learn.microsoft.com/aspnet/core)
  Cross-platform framework for web/services.
* **Entity Framework Core (EF Core)** — [https://learn.microsoft.com/ef/core](https://learn.microsoft.com/ef/core)
  ORM for .NET with LINQ and migrations.
* **FluentValidation** — [https://docs.fluentvalidation.net](https://docs.fluentvalidation.net)
  Strongly-typed validation rules.
* **Serilog** — [https://serilog.net](https://serilog.net)
  Structured logging for .NET.
* **YARP (Yet Another Reverse Proxy)** — [https://microsoft.github.io/reverse-proxy/](https://microsoft.github.io/reverse-proxy/)
  .NET reverse proxy & gateway.
* **Scalar** — [https://scalar.com](https://scalar.com)
  OpenAPI documentation and exploration.

### Monorepo & Tooling

* **Turborepo** — [https://turbo.build](https://turbo.build)
  High-performance JS/TS monorepo build system.
* **pnpm (Performant NPM)** — [https://pnpm.io](https://pnpm.io)
  Fast, disk-efficient package manager.
* **Nextra** — [https://nextra.site](https://nextra.site)
  Next.js-based documentation site framework.
* **MDX (Markdown + JSX)** — [https://mdxjs.com](https://mdxjs.com)
  Write JSX in Markdown documents.